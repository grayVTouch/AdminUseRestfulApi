{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{372:function(t,i,e){\"use strict\";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e(\"div\",{staticClass:\"module-container\"},[e(\"module-nav\",{attrs:{topRoute:t.topRoute,pos:t.pos}}),t._v(\" \"),e(\"div\",{staticClass:\"module-content\"},[e(\"div\",{staticClass:\"in\"},[e(\"form\",{on:{submit:function(i){return i.preventDefault(),t.submit(i)}}},[e(\"table\",{staticClass:\"input-tb\"},[e(\"tbody\",[e(\"tr\",{class:t.getClass(t.error.name),attrs:{id:\"name\"}},[e(\"td\",[t._v(\"名称\")]),t._v(\" \"),e(\"td\",[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form.name,expression:\"form.name\"}],staticClass:\"form-text\",attrs:{type:\"text\"},domProps:{value:t.form.name},on:{input:function(i){i.target.composing||t.$set(t.form,\"name\",i.target.value)}}}),t._v(\" \"),e(\"span\",{staticClass:\"necessary\"},[t._v(\"*\")]),t._v(\" \"),e(\"span\",{staticClass:\"tip\"}),t._v(\" \"),e(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.name))])])]),t._v(\" \"),e(\"tr\",{class:t.getClass(t.error.detection_pos_id),attrs:{id:\"detection_pos_id\"}},[e(\"td\",[t._v(\"检测位置\")]),t._v(\" \"),e(\"td\",[e(\"i-select\",{staticStyle:{width:\"300px\"},on:{\"on-change\":t.setPreview},model:{value:t.form.detection_pos_id,callback:function(i){t.$set(t.form,\"detection_pos_id\",i)},expression:\"form.detection_pos_id\"}},t._l(t.position,function(i){return e(\"i-option\",{key:i.id,attrs:{value:i.id}},[t._v(t._s(i.name))])}),1),t._v(\" \"),e(\"span\",{staticClass:\"necessary\"},[t._v(\"*\")]),t._v(\" \"),e(\"span\",{staticClass:\"tip\"}),t._v(\" \"),e(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.detection_pos_id))])],1)]),t._v(\" \"),e(\"tr\",{class:t.getClass(t.error.option),attrs:{id:\"option\"}},[e(\"td\",[t._v(\"选项\")]),t._v(\" \"),e(\"td\",{ref:\"option\"},[t._l(t.option,function(i,n){return e(\"div\",{key:n,staticClass:\"line\"},[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:i.key,expression:\"v.key\"}],staticClass:\"form-text\",attrs:{type:\"text\",placeholder:\"键名\"},domProps:{value:i.key},on:{input:function(e){e.target.composing||t.$set(i,\"key\",e.target.value)}}}),t._v(\"\\n                                ：\\n                                \"),e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:i.value,expression:\"v.value\"}],staticClass:\"form-text\",attrs:{type:\"text\",placeholder:\"键值\"},domProps:{value:i.value},on:{input:function(e){e.target.composing||t.$set(i,\"value\",e.target.value)}}}),t._v(\" \"),e(\"button\",{staticClass:\"run-button run-button-orange\",attrs:{type:\"button\"},on:{click:function(i){return t.option.splice(n,1)}}},[t._v(\"删除\")]),t._v(\" \"),n+1==t.option.length?e(\"button\",{staticClass:\"run-button run-button-blue\",attrs:{type:\"button\"},on:{click:function(i){return t.option.push({key:\"\",value:\"\"})}}},[t._v(\"+ 新增\")]):t._e()])}),t._v(\" \"),0==t.option.length?e(\"button\",{staticClass:\"run-button run-button-blue\",attrs:{type:\"button\"},on:{click:function(i){return t.option.push({key:\"\",value:\"\"})}}},[t._v(\"+ 新增\")]):t._e(),t._v(\" \"),e(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),e(\"span\",{staticClass:\"tip\"},[t._v(\"选项必须存在！如非必要请勿改动\")]),t._v(\" \"),e(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.option))])],2)]),t._v(\" \"),e(\"tr\",{class:t.getClass(t.error.weight),attrs:{id:\"weight\"}},[e(\"td\",[t._v(\"权重\")]),t._v(\" \"),e(\"td\",[e(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form.weight,expression:\"form.weight\"}],staticClass:\"form-text\",attrs:{type:\"number\",step:\"0\"},domProps:{value:t.form.weight},on:{input:function(i){i.target.composing||t.$set(t.form,\"weight\",i.target.value)}}}),t._v(\" \"),e(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),e(\"span\",{staticClass:\"tip\"},[t._v(\"默认：0，仅允许输入整数\")]),t._v(\" \"),e(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.weight))])])]),t._v(\" \"),t._m(0)])]),t._v(\" \"),e(\"div\",{staticClass:\"preview\"},[e(\"div\",{staticClass:\"in\"},[t.preview?e(\"img\",{staticClass:\"image\",attrs:{src:t.preview}}):e(\"div\",{staticClass:\"empty\"},[t._v(\"暂无模块映射图，请前往检测模块处添加（可选）\")])])])])])]),t._v(\" \"),e(\"v-loading\",{ref:\"loading\"})],1)};n._withStripped=!0;var s={name:\"v-brand\",data:function(){return{form:{name:\"\",detection_pos_id:0,weight:0},error:{},ajax:{get:null,submit:null},dom:{},ins:{loading:null},pending:{submit:null},data:{},callback:{},api:detectionItemApi,position:[],option:[{key:\"normal\",value:\"正常\"},{key:\"exception\",value:\"异常\"}],preview:\"\"}},created:function(){},mounted:function(){this.initDom(),this.initInstance(),this.initialize()},mixins:[mixins.state,mixins.loading,mixins.form.get,mixins.form.confirm],methods:{initDom:function(){},initInstance:function(){},initialize:function(){var t=this;new Promise(function(i){t.ins.loading.show(),detectionPosApi.all(function(e,n){if(200!=n)return t.eNotice(e),void i(!1);t.position=e,i(!0)})}).then(function(i){return new Promise(function(e){i?t.getData(function(){t.setPreview(t.form.detection_pos_id),\"edit\"==t.param.mode&&(t.option=G.jsonDecode(t.form.option)),e()}):e()})}).finally(function(){t.ins.loading.hide()})},check:function(t){return{status:!0,field:\"\",msg:\"\"}},getOption:function(){this.form.option=G.jsonEncode(this.option)},setPreview:function(t){for(var i=this,e=0,n=null;e<this.position.length;++e)if((n=this.position[e]).id==t)return this.ajax.module instanceof G.ajax&&this.ajax.module.native(\"abort\"),void(this.ajax.module=detectionModuleApi.detail(n.detection_module_id,function(t,e){200==e?i.preview=t.image:i.eNotice(t)}));this.preview=\"\"},submit:function(){var t=this;new Promise(function(i){if(t.pending.submit)t.$info(\"请求中...请耐心等待\");else{var e=t.check();if(!e.status)return t.error[e.field]=e.msg,void vScroll(e.field);t.getOption(),t.pending.submit=!0,t.ins.loading.show(),t.ajax.submit=t.api[t.param.mode](t.form,function(e,n){if(t.error={},200!=n)return t.initialState(\"loading\",\"submit\",\"submit\"),400==n?(t.error=e,void vScroll(G.firstKey(e))):void t.$error(e);t.form.id=e,i()}),t.ins.loading.setArgs(t.ajax.submit,\"submit\")}}).then(function(){t.confirm(\"检测项\",\"/detectionItem/list\")}).finally(function(){t.initialState(\"loading\",\"submit\",\"submit\")})}}},o=(e(376),e(543),e(544),e(23)),a=Object(o.a)(s,n,[function(){var t=this.$createElement,i=this._self._c||t;return i(\"tr\",[i(\"td\",{attrs:{colspan:\"2\"}},[i(\"button\",{staticClass:\"run-button run-button-submit\",attrs:{type:\"submit\"}},[this._v(\"提交\")])])])}],!1,null,\"01f5038c\",null);a.options.__file=\"source/vue/view/DetectionItem/thing.vue\";i.default=a.exports},375:function(t,i,e){},376:function(t,i,e){\"use strict\";var n=e(375);e.n(n).a},452:function(t,i,e){},453:function(t,i,e){},543:function(t,i,e){\"use strict\";var n=e(452);e.n(n).a},544:function(t,i,e){\"use strict\";var n=e(453);e.n(n).a}}]);","extractedComments":[]}