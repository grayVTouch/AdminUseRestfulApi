{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{381:function(t,s,i){\"use strict\";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i(\"div\",{staticClass:\"module-container\"},[i(\"module-nav\",{attrs:{topRoute:t.topRoute,pos:t.pos}}),t._v(\" \"),i(\"div\",{staticClass:\"module-content\"},[i(\"div\",{staticClass:\"in\"},[i(\"form\",{on:{submit:function(s){return s.preventDefault(),t.submit(s)}}},[i(\"table\",{staticClass:\"input-tb\"},[i(\"tbody\",[i(\"tr\",{class:t.getClass(t.error.title),attrs:{id:\"title\"}},[i(\"td\",[t._v(\"标题\")]),t._v(\" \"),i(\"td\",[i(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form.title,expression:\"form.title\"}],staticClass:\"form-text\",attrs:{type:\"text\"},domProps:{value:t.form.title},on:{input:function(s){s.target.composing||t.$set(t.form,\"title\",s.target.value)}}}),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"},[t._v(\"*\")]),t._v(\" \"),i(\"span\",{staticClass:\"tip\"}),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.title))])])]),t._v(\" \"),i(\"tr\",{class:t.getClass(t.error.article_type_id),attrs:{id:\"article_type_id\"}},[i(\"td\",[t._v(\"文章分类\")]),t._v(\" \"),i(\"td\",[i(\"v-select\",{staticClass:\"form-select\",attrs:{data:t.type,has:!1},model:{value:t.form.article_type_id,callback:function(s){t.$set(t.form,\"article_type_id\",s)},expression:\"form.article_type_id\"}}),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"},[t._v(\"*\")]),t._v(\" \"),i(\"span\",{staticClass:\"tip\"}),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.article_type_id))])],1)]),t._v(\" \"),i(\"tr\",{class:t.getClass(t.error.thumb),attrs:{id:\"thumb\"}},[i(\"td\",[t._v(\"封面\")]),t._v(\" \"),i(\"td\",{ref:\"image-container\"},[i(\"div\",{staticClass:\"upload-image\"},[t._m(0),t._v(\" \"),i(\"div\",{staticClass:\"init-show-image-list\"},[\"edit\"==t.param.mode&&t.form.thumb_explain?i(\"img\",{staticClass:\"init-show-image\",attrs:{src:t.form.thumb_explain}}):t._e()]),t._v(\" \"),t._m(1),t._v(\" \"),t._m(2)])])]),t._v(\" \"),\"n\"==t.form.is_link?i(\"tr\",{class:t.getClass(t.error.content),attrs:{id:\"content\"}},[i(\"td\",[t._v(\"内容\")]),t._v(\" \"),i(\"td\",[i(\"div\",{ref:\"editor\",staticClass:\"wang-editor\"}),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"},[t._v(\"*\")]),t._v(\" \"),i(\"span\",{staticClass:\"tip\"}),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.content))])])]):t._e(),t._v(\" \"),i(\"tr\",{class:t.getClass(t.error.source),attrs:{id:\"source\"}},[i(\"td\",[t._v(\"来源\")]),t._v(\" \"),i(\"td\",[i(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form.source,expression:\"form.source\"}],staticClass:\"form-text\",attrs:{type:\"text\"},domProps:{value:t.form.source},on:{input:function(s){s.target.composing||t.$set(t.form,\"source\",s.target.value)}}}),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),i(\"span\",{staticClass:\"tip\"}),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.source))])])]),t._v(\" \"),i(\"tr\",{class:t.getClass(t.error.weight),attrs:{id:\"weight\"}},[i(\"td\",[t._v(\"权重\")]),t._v(\" \"),i(\"td\",[i(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form.weight,expression:\"form.weight\"}],staticClass:\"form-text\",attrs:{type:\"number\",step:\"0\"},domProps:{value:t.form.weight},on:{input:function(s){s.target.composing||t.$set(t.form,\"weight\",s.target.value)}}}),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),i(\"span\",{staticClass:\"tip\"},[t._v(\"默认：0\")]),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.weight))])])]),t._v(\" \"),i(\"tr\",{attrs:{id:\"hidden\"}},[i(\"td\",[t._v(\"是否隐藏\")]),t._v(\" \"),i(\"td\",[i(\"radio-group\",{model:{value:t.form.hidden,callback:function(s){t.$set(t.form,\"hidden\",s)},expression:\"form.hidden\"}},t._l(t.$store.state.business.bool_str,function(s,a){return i(\"radio\",{key:a,attrs:{label:a}},[i(\"span\",[t._v(t._s(s))])])}),1),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),i(\"span\",{staticClass:\"tip\"},[t._v(\"默认：否\")]),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.weight))])],1)]),t._v(\" \"),i(\"tr\",{attrs:{id:\"is_link\"}},[i(\"td\",[t._v(\"是否链接\")]),t._v(\" \"),i(\"td\",[i(\"radio-group\",{model:{value:t.form.is_link,callback:function(s){t.$set(t.form,\"is_link\",s)},expression:\"form.is_link\"}},t._l(t.$store.state.business.bool_str,function(s,a){return i(\"radio\",{key:a,attrs:{label:a}},[i(\"span\",[t._v(t._s(s))])])}),1),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),i(\"span\",{staticClass:\"tip\"},[t._v(\"默认：否，如果选择：是，那么文章内容将无需填写（会自动隐藏）\")]),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.is_link))])],1)]),t._v(\" \"),i(\"tr\",{class:t.getClass(t.error.link),attrs:{id:\"link\"}},[i(\"td\",[t._v(\"链接\")]),t._v(\" \"),i(\"td\",[i(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.form.link,expression:\"form.link\"}],staticClass:\"form-text\",attrs:{type:\"text\"},domProps:{value:t.form.link},on:{input:function(s){s.target.composing||t.$set(t.form,\"link\",s.target.value)}}}),t._v(\" \"),i(\"span\",{staticClass:\"necessary\"}),t._v(\" \"),i(\"span\",{staticClass:\"tip\"},[t._v(\"链接地址，例如：https://www.baidu.com/\")]),t._v(\" \"),i(\"span\",{staticClass:\"msg\"},[t._v(t._s(t.error.link))])])]),t._v(\" \"),t._m(3)])])])])]),t._v(\" \"),i(\"v-loading\",{ref:\"loading\"})],1)};a._withStripped=!0;var e={name:\"v-image\",data:function(){return{form:{article_type_id:\"\",hidden:\"n\",is_link:\"n\",weight:0},field:{id:\"id\",p_id:\"p_id\"},error:{},ins:{},dom:{},ajax:{submit:null},pending:{submit:!1},api:articleApi,callback:{image:null},image:{},type:[]}},mixins:[mixins.loading,mixins.state,mixins.form.get,mixins.form.image,mixins.form.confirm],mounted:function(){this.initDom(),this.initInstance(),this.getData()},methods:{initDom:function(){},initInstance:function(){this.ins.editor=new wangEditor(this.$refs.editor),this.ins.editor.customConfig.uploadImgServer=topContext.imageApiForwangEditor,this.ins.editor.customConfig.uploadFileName=\"image[]\",this.ins.editor.create()},getData:function(){var t=this;new Promise(function(s){t.pendingState(\"loading\"),articleTypeApi.list({},function(i,a){s(),200==a?t.type=i:t.eNotice(i)})}).then(function(){return new Promise(function(s){\"edit\"!=t.param.mode?s():t.api.detail(t.param.id,function(i,a){if(s(),200==a){var e=i,n=e.content?e.content.content:\"\";delete e.content,t.form=e,t.ins.editor.txt.html(n)}else t.eNotice(i)})})}).finally(function(){t.initialState(\"loading\")})},check:function(t){return{status:!0,field:\"\",msg:\"\"}},submit:function(){var t=this;return new Promise(function(s){t.pending.submit?t.$info(\"请求中...请耐心等待\"):(t.pendingState(\"loading\",\"submit\"),t.form.content=t.ins.editor.txt.html(),t.ajax.submit=t.api[t.param.mode](t.form,function(i,a){if(200!=a)return t.initialState(\"loading\",\"submit\",\"submit\"),400==a?(t.error=i,void vScroll(G.firstKey(i))):void t.$error(i);t.form.id=i,s()}),t.ins.loading.setArgs(t.ajax.submit,\"submit\"))}).then(function(){return new Promise(function(s){t.ins.image.empty()?s(!1):(t.callback.image=function(i,a){if(200!=a)return t.eNotice(i),void s(!1);i=i,t.image=i,s(!0)},t.ins.image.upload())})}).then(function(s){return new Promise(function(i){s?t.api.image({id:t.form.id,image:t.image.url},function(s,a){200!=a&&t.eNotice(s),i()}):i()})}).then(function(){t.confirm(\"文章列表\",\"/article/list\")}).finally(function(){t.initialState(\"loading\",\"submit\",\"submit\")})}}},n=(i(639),i(640),i(641),i(14)),r=Object(n.a)(e,a,[function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"select-images\"},[s(\"div\",{staticClass:\"upload-show\"},[s(\"div\",{staticClass:\"image-line\"},[s(\"img\",{staticClass:\"image upload-image-btn\",attrs:{src:\"\"}}),s(\"span\",{staticClass:\"selected-count hide\"},[this._v(\"10\")])]),this._v(\" \"),s(\"div\",{staticClass:\"text-line\"},[this._v(\"请选择要上传的图片\")]),this._v(\" \"),s(\"div\",{staticClass:\"clear-selected\",attrs:{title:\"清空已选择的图片\"}},[s(\"img\",{staticClass:\"image\",attrs:{src:\"\"}})]),this._v(\" \"),s(\"input\",{staticClass:\"upload-images-input\",attrs:{type:\"file\",name:\"upload_images\"}})]),this._v(\" \"),s(\"div\",{staticClass:\"tip\"},[this._v(\"这边是提示内容\")])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"div\",{staticClass:\"preview-images hide\"},[s(\"div\",{staticClass:\"image-item\",attrs:{\"data-filename\":\"sama-96.jpg\"}},[s(\"div\",{staticClass:\"img\"},[s(\"img\",{staticClass:\"image\",attrs:{src:\"http://qp333com.oss-cn-hangzhou.aliyuncs.com/7peishang.com/avatar/2017-11-10/bf07531ad5dd288afc93bab47ee8d258.jpg\"}})]),this._v(\" \"),s(\"div\",{staticClass:\"close\"},[s(\"img\",{staticClass:\"image\",attrs:{src:\"/UploadImages/Images/delete_unfocus.png\",\"data-focus\":\"/UploadImages/Images/delete_focus.png\",\"data-unfocus\":\"/UploadImages/Images/delete_unfocus.png\"}})]),this._v(\" \"),s(\"div\",{staticClass:\"progress hide\"},[s(\"div\",{staticClass:\"p-total\"},[s(\"div\",{staticClass:\"p-cur\"})])]),this._v(\" \"),s(\"div\",{staticClass:\"msg hide\"},[s(\"div\",{staticClass:\"msg-in\"},[this._v(\"成功\")])])])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i(\"div\",{staticClass:\"upload-image-list hide\"},[i(\"div\",{staticClass:\"upload-title\"},[t._v(\"待上传列表\")]),t._v(\" \"),i(\"div\",{staticClass:\"image-list\"},[i(\"div\",{staticClass:\"list-content list-title\"},[i(\"div\",{staticClass:\"item div-preview\"},[t._v(\"图片预览\")]),t._v(\" \"),i(\"div\",{staticClass:\"item div-type\"},[t._v(\"类型\")]),t._v(\" \"),i(\"div\",{staticClass:\"item div-size\"},[t._v(\"大小\")]),t._v(\" \"),i(\"div\",{staticClass:\"item div-speed\"},[t._v(\"速度\")]),t._v(\" \"),i(\"div\",{staticClass:\"item div-status\"},[t._v(\"状态\")]),t._v(\" \"),i(\"div\",{staticClass:\"item div-opr\"},[t._v(\"操作\")])]),t._v(\" \"),i(\"div\",{staticClass:\"list-content list-body\"})])])},function(){var t=this.$createElement,s=this._self._c||t;return s(\"tr\",[s(\"td\",{attrs:{colspan:\"2\"}},[s(\"button\",{staticClass:\"run-button run-button-submit\",attrs:{type:\"submit\"}},[this._v(\"提交\")])])])}],!1,null,\"cfd934ac\",null);r.options.__file=\"source/vue/view/article/thing.vue\";s.default=r.exports},496:function(t,s,i){},497:function(t,s,i){},498:function(t,s,i){},639:function(t,s,i){\"use strict\";var a=i(496);i.n(a).a},640:function(t,s,i){\"use strict\";var a=i(497);i.n(a).a},641:function(t,s,i){\"use strict\";var a=i(498);i.n(a).a}}]);","extractedComments":[]}